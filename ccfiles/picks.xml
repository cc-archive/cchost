<div>
<tal:block replace="">
<!--

Creative Commons has made the contents of this file
available under a CC-GNU-GPL license:

 http://creativecommons.org/licenses/GPL/2.0/

 A copy of the full license can be found as part of this
 distribution in the file LICENSE.TXT

You may use the ccHost software in accordance with the
terms of that license. You agree that you are solely 
responsible for your use of the ccHost software and you
represent and warrant to Creative Commons that your use
of the ccHost software will comply with the CC-GNU-GPL.

$Id$


To see this file create a link to: media/viewfile/picks.xml

-->
</tal:block>

<tal:block define="_by php: _('by');" />
<tal:block define="pod_title php: _('Podcast')" />
<tal:block define="stream_title php: _('Stream')" />
<tal:block define="play_title php: _('Play')" />

<script>
function pickwinplay(qstring)
{
  var url = home_url + 'playlist/popup' + q + qstring;
  var dim = "height=300,width=550";
  var win = window.open( url, 'cchostplayerwin', "status=1,toolbar=0,location=0,menubar=0,directories=0," +
                "resizable=1,scrollbars=1," + dim );
}
</script>

<metal:block define-macro="picks">
  <h3 tal:content="pick_title" />
  <tal:block define="chart php: cc_query_fmt($qstring);" />
  <tal:block condition="chart" >
    <table cellspacing="0" cellpadding="0" id="edpick_stream_links">
      <tr>
        <td>
          <div class="cc_podcast_link"><a href="${home-url}podcast/page?$qstring"><span tal:content="pod_title" /></a></div>
        </td>
        <td>
          <div class="cc_stream_page_link">
            <a href="${home-url}stream/page/playlist.m3u?$qstring"><span tal:content="stream_title" /></a></div>
        </td>
        <td tal:condition="enable_playlists" >
          <div class="cc_stream_page_link">
            <a href="javascript://play win" onclick="pickwinplay('${qstring}');"><span tal:content="play_title" /></a></div>
        </td>
      </tr>
    </table>
          <div tal:repeat="item chart"><a href="${item/file_page_url}" 
                           class="cc_file_link">${item/upload_name}</a> <br />
          <span><tal:block content="_by" /> <a href="${item/artist_page_url}">${item/user_real_name}</a></span>
            <p tal:condition="ed_pick" tal:repeat="editorial item/upload_extra/edpicks">
                 <i> <tal:block content="php: CC_strchop('${editorial/review_text}',40)" /> <a href="${editorial/review_url}">(more) </a></i>
            </p>
          </div>
      </tal:block>
      <div tal:condition="not: chart" >No chart</div>
</metal:block>

<h1 tal:content="php: CC_lang('Editors\' Picks and Hot Tracks');" />
<style>
.pickspage td
{
    vertical-align: top;
    padding-right: 12px;
}
.pickspage
{
    margin-left: 3%;
    width: 90%;
}
.pickspage td p
{
  margin: 1px;
}
.pickspage td a
{
  white-space: nowrap;
}
.pickspage td span, 
.pickspage td i
{
  white-space: nowrap;
  padding-left: 20px;
}
.pickspage td i
{
  color: green;
}
.pickspage td div
{
  margin-bottom: 7px;
}
.pickspage .cc_file_link
{
  font-weight: bold;
}
.pickspage h3 {
  border-bottom: 1px dotted #77A;
}

.pickspage .cc_podcast_link,
.pickspage .cc_stream_page_link {
   
}
.pickspage .cc_podcast_link, 
.pickspage .cc_stream_page_link, 
.pickspage .cc_podcast_link span, 
.pickspage .cc_stream_page_link span {
  margin:0px;
  padding: 3px 0px 0px 0px;
}

.pickspage .cc_podcast_link,
.pickspage .cc_stream_page_link {
  text-align: center;
  width: 91px;
}

.pickspage .cc_podcast_link {
   background: url('${site-root}cctemplates/ccmixter/mixter-button-o-small.gif') no-repeat;
}
.pickspage .cc_stream_page_link {
   background: url('${site-root}cctemplates/ccmixter/mixter-button-b-small.gif') no-repeat;
}

</style>
<table class="pickspage">
  <tr>
    <td rowspan="2" style="padding-right: 25px;">
        <tal:block define="pick_title php:_('Editors\' Picks');
                           ed_pick 1;
                           qstring string:tags=editorial_pick&sort=date&dir=DESC&limit=22;" />
        <metal:block use-macro="picks" />
    </td>
    <td>
        <tal:block define="settings php:CC_get_config('chart');" />
        <tal:block define="pick_title php:_('What\'s Hot Right Now');
                           ed_pick 0;
                           qstring string:tags=remix,-digital_distortion&sort=rank&dir=DESC&sinced=${settings/cut-off}&limit=20;" />
        <metal:block use-macro="picks" />
    </td>
  </tr>
  <tr>
    <td>
        <tal:block define="pick_title php:_('All Time Hot List');
                           ed_pick 0;
                           qstring string:tags=remix&sort=rank&dir=DESC&limit=10;" />
        <metal:block use-macro="picks" />
    </td>
  </tr>
</table>

</div>
