<tal:block>
<tal:block replace="">
<!--

Creative Commons has made the contents of this file
available under a CC-GNU-GPL license:

 http://creativecommons.org/licenses/GPL/2.0/

 A copy of the full license can be found as part of this
 distribution in the file LICENSE.TXT

You may use the ccHost software in accordance with the
terms of that license. You agree that you are solely 
responsible for your use of the ccHost software and you
represent and warrant to Creative Commons that your use
of the ccHost software will comply with the CC-GNU-GPL.

$Id$

-->
</tal:block>


<metal:block define-macro="dl_popup_script">
    <tal:block define="lang_get_ratings php: CC_lang('getting ratings...');" />
    <script>
    //<!--
    var lang_get_ratings = '${lang_get_ratings}';
    //-->
    </script>
    <script type="text/javascript" src="${root-url}cctemplates/dl_popup.js" />
</metal:block>

<metal:block define-macro="show_zip_dir">
    <tal:block define="ziptitle php: CC_lang('Contents of ZIP Archive:')" />
    <tal:block repeat="zip record/zipdirs">
        <div class="cc_zipdir_head">$ziptitle "${zip/name}"</div>
        <ul class="cc_zipdir">
           <li tal:repeat="file zip/dir/files">${file}</li>
        </ul>
     </tal:block>
</metal:block>

<metal:block define-macro="upload_not_published">
    <div class="cc_upload_not_published">${record/publish_message}</div>
</metal:block>

<metal:block define-macro="upload_banned">
  <div class="cc_upload_banned">${record/banned_message}</div>
</metal:block>

<metal:block define-macro="ratings_show" >
    <tal:block condition="not: record/thumbs_up"><metal:block use-macro="${ratings_with_stars}" /></tal:block>
    <tal:block condition="record/thumbs_up"><metal:block use-macro="${ratings_with_thumb}" /></tal:block>
</metal:block>

<metal:block define-macro="ratings_with_thumb" >
  <tr>
    <td colspan="2" class="cc_ratings_thumb"><span id="cc_rate_head_${record/upload_id}"></span>
      <div class="cc_rate_it_line">
        <div tal:condition="record/ok_to_rate" class="rcmd" id="cc_star_block_${record/upload_id}" > <a id="ratingscommand" 
                onclick="cc_star_pick(${record/upload_id},5)"
                href="javascript://say DAAAAAAAAAAAAAM!"><span tal:content="php: _('say Love It!')" /></a></div>

        <a tal:condition="record/reviews_link" href="${record/reviews_link/url}" class="rvlink" tal:content="record/reviews_link/text" />

        <span id="cc_rate_block_${record/upload_id}" class="rate_block">
          <tal:block condition="record/ratings_score">${record/ratings_score} <span tal:content="php: _('say Love It!')" /></tal:block>
        </span>
      </div>
    </td>
  </tr>
</metal:block>

<metal:block define-macro="ratings_with_stars" >
  <tr>
    <tal:block condition="record/ratings_score"      define="rate_head_show string:inline" />
    <tal:block condition="not: record/ratings_score" define="rate_head_show string:none" />
    <th class="cc_ratings_head" style="vertical-align: middle"><span id="cc_rate_head_${record/upload_id}" style="display: ${rate_head_show};" 
          tal:content="php: CC_lang('ratings:');"  />
    </th>
    <td id="cc_rate_block_${record/upload_id}">
      <metal:block use-macro="${ratings_stars}" />
    </td>
  </tr>
  <tr tal:condition="record/ok_to_rate" >
    <th />
    <td>
      <metal:block use-macro="${dl_edit_ratings}" />
    </td>
  </tr>
  <tr  tal:condition="record/reviews_link">
    <th />
    <td><a href="${record/reviews_link/url}" tal:content="record/reviews_link/text" />
    </td>
  </tr>
</metal:block>

<metal:block define-macro="ratings_stars" >
  <tal:block condition="record/ratings_score">
    <tal:block condition="record/thumbs_up">
          <tal:block condition="record/ratings_score">${record/ratings_score} <span tal:content="php: _('say Love It!')" /></tal:block>
    </tal:block>
    <tal:block condition="not: record/thumbs_up">
          <tal:block repeat="i record/ratings"><img 
            src="${root-url}ccimages/stars/star-${i}.gif" height="17" width="17" /></tal:block> 
          <span tal:condition="record/ratings_score">(${record/ratings_score})</span>
    </tal:block>
  </tal:block>
</metal:block>


<metal:block define-macro="dl_edit_ratings">
    <div id="cc_star_block_${record/upload_id}" class="cc_star_wrapper">
        <ul class="cc_ratingslist" >
        <li><img onclick="cc_star_pick(${record/upload_id},1)"  
           src="${root-url}ccimages/stars/star-empty.gif" id="cc_star_${record/upload_id}_1" 
           onmouseover="cc_star_hover_on(${record/upload_id},1)" 
           onmouseout="cc_star_hover_off(${record/upload_id},1)" /></li>
        <li><img onclick="cc_star_pick(${record/upload_id},2)"  
           src="${root-url}ccimages/stars/star-empty.gif"  id="cc_star_${record/upload_id}_2" 
           onmouseover="cc_star_hover_on(${record/upload_id},2)" 
           onmouseout="cc_star_hover_off(${record/upload_id},2)" /></li>
        <li><img onclick="cc_star_pick(${record/upload_id},3)"  
           src="${root-url}ccimages/stars/star-empty.gif"  id="cc_star_${record/upload_id}_3" 
           onmouseover="cc_star_hover_on(${record/upload_id},3)"  
           onmouseout="cc_star_hover_off(${record/upload_id},3)" /></li>
        <li><img onclick="cc_star_pick(${record/upload_id},4)"  
           src="${root-url}ccimages/stars/star-empty.gif"  id="cc_star_${record/upload_id}_4" 
           onmouseover="cc_star_hover_on(${record/upload_id},4)"  
           onmouseout="cc_star_hover_off(${record/upload_id},4)" /></li>
        <li><img onclick="cc_star_pick(${record/upload_id},5)" 
           src="${root-url}ccimages/stars/star-empty.gif"  id="cc_star_${record/upload_id}_5" 
           onmouseover="cc_star_hover_on(${record/upload_id},5)"  
           onmouseout="cc_star_hover_off(${record/upload_id},5)" /></li>
        </ul> <div class="cc_ratings_arrow"> <span tal:content="php: CC_lang('rate');" /></div>
    </div>
</metal:block>

<metal:block define-macro="dl_action_buttons">
  <div id="cc_action_buttons">
    <table class="cc_buttonpadding" tal:condition="record/works_page">
      <tr tal:condition="record/script_link">
          <td><a id="cc_streamfile" href="javascript:void(0)" onclick="${record/script_link/url}"><span tal:content="record/script_link/text"/></a> </td>
      </tr>
      <tal:block repeat="grp menu">
        <tr tal:repeat="item grp">
          <tal:block define="parent_id item/parent_id | nothing" />
          <td id="${parent_id}" >
              <tal:block define="classname item/class | nothing" />
              <a href="${item/action}" tal:attributes="type item/type | nothing"  tal:on-error=""
                class="${classname}" id="${item/id}"><span tal:content="item/menu_text" /></a></td>
        </tr>
      </tal:block>
    </table>
    <div class="cc_buttonpadding" tal:condition="not: record/works_page">
      <tal:block condition="record/script_link">
          <a id="cc_streamfile" href="javascript:void(0)" onclick="${record/script_link/url}"><span tal:content="record/script_link/text"/></a> 
      </tal:block>
      <tal:block condition="record/stream_link">
          <a id="cc_streamfile" href="${record/stream_link/url}"><span tal:content="record/stream_link/text"/></a> 
      </tal:block>
      <tal:block condition="menu/download">
          <a id="cc_downloadbutton" href="javascript: void(0);" onclick="cc_show_dl_box(event,'${record/upload_id}',this);" >
              <span tal:content="php: CC_lang('Download')" />
          </a>
          <div class="cc_file_download_popup" id="dlmenu${record/upload_id}" style="display:none;position:absolute;">
              <p>
                  <tal:block content="php: CC_lang('IE: Right-click select \'Save Target As\'')" /><br />
                  <tal:block content="php: CC_lang('Mac: Control-click select \'Save Link As\'')" /><br />
              </p>
              <p tal:repeat="mi menu/download" ><a href="${mi/action}" id="${mi/id}" type="${mi/type}" title="${mi/tip}"><span tal:content="mi/menu_text" /></a>
              </p>
          </div>
      </tal:block>
      <tal:block condition="menu/playlist">
       <tal:block define="plm menu/playlist/playlist_menu" />
       <div tal:condition="plm/parent_id" id="${plm/parent_id}">
          <a id="commentcommand" class="${plm/class}" href="${plm/action}"><span>${plm/menu_text}</span></a>
       </div>
      </tal:block>
      <tal:block condition="menu/comment/comments">
        <a id="commentcommand" 
            href="${menu/comment/comments/action}"><span>${menu/comment/comments/menu_text}</span></a>
      </tal:block>
    </div><!-- buttonpadding -->
  </div><!-- action_buttons -->
</metal:block>

<metal:block define-macro="upload_flag">
<tal:block condition="exists: record/flag_url"><a class="cc_flag_url" 
   title="$upload_flag_tip" href="${record/flag_url}"><span></span></a> </tal:block>
</metal:block>

<metal:block define-macro="howididit_link">
  <div style="width:150px;margin:12px;"><a class="cc_gen_button" href="${record/howididit_link/action}"><span>"${record/howididit_link/text}"</span></a></div>
</metal:block>


<metal:block define-macro="ratings_field">
<style> #rl { white-space:nowrap;vertical-align:middle; } </style>
<tal:block define="us string:ccimages/stars/star-full.gif" />
<tal:block define="u string:$root-url$us" />
<div id="rl"><input type="radio" id="ratings_score" name="ratings_score" value="500" /><label><img src="${u}" /><img src="${u}" /><img src="${u}"/><img src="${u}" /><img src="${u}" /></label></div>
<div id="rl"><input type="radio" id="ratings_score" name="ratings_score" value="400" /><label><img src="${u}" /><img src="${u}" /><img src="${u}" /><img src="${u}" /></label></div>
<div id="rl"><input type="radio" id="ratings_score" name="ratings_score" value="300" checked="checked" /><label><img src="${u}" /><img src="${u}" /><img src="${u}" /></label></div>
<div id="rl"><input type="radio" id="ratings_score" name="ratings_score" value="200" /><label><img src="${u}" /><img src="${u}" /></label></div>
<div id="rl"><input type="radio" id="ratings_score" name="ratings_score" value="100" /><label><img src="${u}" /></label></div>
</metal:block>


</tal:block>
