<tal:block>
  <tal:block define="idetail detail | nothing" />
  <tal:block define="by php:_('by');" /> 
  <tal:block define="R php:CC_get_details(${records/0/upload_id},${idetail})" />
  <tal:block define="upname php: CC_strchop('${R/upload_name}',${chop},${dochop});" />
  <tal:block define="user   php: CC_strchop('${R/user_real_name}',${chop},${dochop});" />

<div class="cc_list" id="_info_${R/upload_id}">

  <div class="upload_menu_outer" id="upload_menu_outer_${R/upload_id}"  tal:condition="R/local_menu" >
  <div class="upload_menu_title" id="upload_menu_title_${R/upload_id}" >menu</div>
    <tal:block repeat="grp R/local_menu">
    <tal:block repeat="item grp">
      <div><a id="${item/id}" href="${item/action}"><span tal:content="item/menu_text" /></a></div>
    </tal:block>
    </tal:block>
  </div>

  <a href="${R/license_url}" title="${R/license_name}" class="cc_liclogo" >
    <img src="${root-url}ccimages/lics/small-${R/license_logo}" />
  </a>

  <tal:block condition="idetail">
    <h3 class="dtitle" ><a href="${R/file_page_url}">${upname}</a> ${by} 
              <a href="${R/artist_page_url}" >${user}</a>
    </h3>
  </tal:block>

  <div tal:condition="R/upload_extra/featuring">Featuring: <b>${R/upload_extra/featuring}</b></div>
  <div class="cc_upload_date">
    ${R/upload_date_format}
  </div>

  <tal:block define="tag_array  R/upload_taglinks" />
  <div class="cc_tags">
      Tags: <metal:block use-macro="tags.xml/taglinks" />
  </div>


  <div tal:condition="R/upload_description_html" class="gd_description" id="iddesc_${R/upload_id}">
    <div style="padding: 10px;">
      <span tal:content="php:CC_strchop(${R/upload_description_text},200);" />
    </div>
  </div>
  <table class="files_table" >
    <tr>
      <td class="column files_column">
        <span class="title files_title" tal:content="php: _('Files');" />:<br /> 
        <tal:block repeat="F R/files">
            ${F/file_nicname}: <a href="${F/download_url}">download</a> ${F/file_filesize}<br />
        </tal:block>
      </td>

      <td>&nbsp;</td>

      <td  class="column parents_column" tal:condition="exists: R/remix_parents">
       <div >
        <table>
          <tr>
            <td>
              <img src="${root-url}cctemplates/ccmixter/downloadicon.gif" />
            </td>
            <td>
              <span class="title parents_title" tal:content="php: _('Uses samples from');" />:<br /> 
              <tal:block repeat="P R/remix_parents">
                <tal:block define="upname php: CC_strchop('${P/upload_name}',${chop},${dochop});" />
                <tal:block define="user   php: CC_strchop('${P/user_real_name}',${chop},${dochop});" />
                <a href="${P/file_page_url}"   class="cc_file_link">${upname}</a> ${by}
                <a href="${P/artist_page_url}" class="cc_user_link">${user}</a><tal:block condition="not: repeat/P/end"><br /> </tal:block>
              </tal:block>
            </td>
          </tr>
        </table>
       <!-- remix_parent --></div>
      </td>
      <td>&nbsp</td>
      <td  class="column children_column" tal:condition="exists: R/remix_children">
       <div >
        <table>
          <tr>
            <td>
              <img src="${root-url}cctemplates/ccmixter/uploadicon.gif" />
            </td>
            <td>
              <span class="title children_title" tal:content="php: _('Samples from here are used in');" />:<br /> 
              <tal:block repeat="P R/remix_children">
                <tal:block define="upname php: CC_strchop('${P/upload_name}',${chop},${dochop});" />
                <tal:block define="user   php: CC_strchop('${P/user_real_name}',${chop},${dochop});" />
                <a href="${P/file_page_url}"   class="cc_file_link">${upname}</a> ${by}
                <a href="${P/artist_page_url}" class="cc_user_link">${user}</a>
                <tal:block condition="not: repeat/P/end"><br /> </tal:block>
              </tal:block>
            </td>
          </tr>
        </table>
       <!-- remix_children --></div>
      </td>
    </tr>
  </table>
</div>
</tal:block>