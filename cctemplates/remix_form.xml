<tal:block>
<tal:block replace="">
<!--

Creative Commons has made the contents of this file
available under a CC-GNU-GPL license:

 http://creativecommons.org/licenses/GPL/2.0/

 A copy of the full license can be found as part of this
 distribution in the file LICENSE.TXT

You may use the ccHost software in accordance with the
terms of that license. You agree that you are solely 
responsible for your use of the ccHost software and you
represent and warrant to Creative Commons that your use
of the ccHost software will comply with the CC-GNU-GPL.

$Header$

-->
</tal:block>
<metal:block define-macro="show_remix_license">
    <div class="cc_remix_license_notice" tal:condition="license_name" >
        <span tal:content="php: CC_lang('This upload will be licensed under ')" /> Creative Commons ${license_name}.
    </div>
</metal:block>

<metal:block define-macro="show_remix_search">
    <div id="cc_downstream_mixes">
      <h2 tal:content="php: CC_lang('I Used Samples From:');" />
        <tal:block condition="remix_sources" >
             <tal:block define="local_remixes remix_sources;
                                checkflag inputcheck;
                                remix_class string:cc_remix_source_choice" />
             <metal:block use-macro="remix_form.xml/local_remixes" />
        </tal:block>

        <tal:block condition="pool_sources" >
             <tal:block define="pool_remixes pool_sources;
                                checkflag inputcheck;
                                remix_class string:cc_remix_source_choice" />
             <metal:block use-macro="remix_form.xml/pool_remixes" />
        </tal:block>

        <div tal:condition="got_search_result" class="cc_rsearch_result">

            <tal:block condition="remix_search_result" >
                 <tal:block define="local_remixes remix_search_result;
                                    checkflag '';
                                    remix_class string:cc_remix_search_result" />
                 <metal:block use-macro="remix_form.xml/local_remixes" />
            </tal:block>

            <tal:block condition="pool_search_result" >
                 <tal:block define="pool_remixes pool_search_result;
                                    checkflag '';
                                    remix_class string:cc_remix_search_result" />
                 <metal:block use-macro="remix_form.xml/pool_remixes" />
            </tal:block>

            <div tal:condition="remix_search_limit_hit" class="cc_remix_search_limit_msg"
                 tal:content="php: CC_lang('Search limit reached, try using more words');" />

            <tal:block define="accept_lang php: CC_lang('Accept')" />
            <input tal:condition="got_search_result" type="submit" name="accept_remixes" value="${accept_lang}" />

        </div>

        <tal:block define="search_lang php: CC_lang('Search')" />
        <div class="cc_remix_search_box">
          <p><select name="remix_search_type">
             <tal:block repeat="stype remix_search_types">
               <option tal:condition="not: stype/selected" value="${stype/value}" >${stype/label}</option>
               <option tal:condition="stype/selected" selected="selected" value="${stype/value}" >${stype/label}</option>
             </tal:block>
             </select> <input name="remix_search_query" 
                  value="${remix_search_query}" /></p>
          <p tal:condition="pools">
              <tal:block: content="php: CC_lang('Sample Pools: ')" /><select name="pool" id="pool">
              <tal:block repeat="pool pools">
                <option tal:condition="not: pool/selected" value="${pool/pool_id}">${pool/pool_name}</option>
                <option tal:condition="pool/selected" selected="selected" value="${pool/pool_id}">${pool/pool_name}</option>
              </tal:block>
              </select></p>
          <p><input type="submit" name="search" value="${search_lang}" /></p>
        </div>
        
        <br clear="right" />
    </div>
</metal:block>

<metal:block define-macro="local_remixes">
  <div class="${remix_class}">
    <tal:block repeat="source local_remixes">
        <p><tal:block content="php: CC_lang('I sampled this')" />: <input type="checkbox" tal:attributes="checked checkflag"
        name="remix_sources[${source/upload_id}]" id="remix_sources[${source/upload_id}]" />
        <label for="remix_sources[${source/upload_id}]"> ${source/upload_name}</label>
        <tal:block content="php: CC_lang('by')" /> ${source/user_real_name}</p>
    </tal:block>
  </div>
</metal:block>

<metal:block define-macro="pool_remixes">
  <div class="cc_remix_source_choice">
    <tal:block repeat="item pool_remixes">
      <p><tal:block content="php: CC_lang('I sampled this')" />: 
          <input type="checkbox" tal:attributes="checked checkflag"
        name="pool_sources[${item/pool_item_id}]"  id="pool_sources[${item/pool_item_id}]"/>
        <label for="pool_sources[${item/pool_item_id}]">${item/pool_item_name}</label>
        <tal:block content="php: CC_lang('by')" /> ${item/pool_item_artist} (${item/pool_name})
      </p>
    </tal:block>
  </div>
</metal:block>

</tal:block>